<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;

class LoansSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        // Clear existing data
        DB::table('loans')->truncate();

        // Insert existing data
        $data = [
            [
                'id' => 1,
                'loan_id' => '1752819821',
                'loan_account_number' => null,
                'loan_sub_product' => 731205,
                'client_number' => 10002,
                'guarantor' => null,
                'branch_id' => 1,
                'principle' => 4000000,
                'interest' => 12,
                'business_name' => null,
                'business_age' => null,
                'business_category' => null,
                'business_type' => null,
                'business_licence_number' => null,
                'business_tin_number' => null,
                'business_inventory' => null,
                'cash_at_hand' => null,
                'daily_sales' => null,
                'cost_of_goods_sold' => null,
                'available_funds' => 0,
                'operating_expenses' => null,
                'monthly_taxes' => null,
                'other_expenses' => null,
                'collateral_value' => 0,
                'collateral_location' => null,
                'collateral_description' => null,
                'collateral_type' => '',
                'tenure' => 9,
                'principle_amount' => null,
                'interest_method' => null,
                'bank_account_number' => null,
                'bank' => null,
                'LoanPhoneNo' => null,
                'status' => 'ONPROGRESS',
                'loan_status' => 'NORMAL',
                'restructure_loanId' => null,
                'heath' => 'GOOD',
                'phone_number' => null,
                'pay_method' => 'internal_transfer',
                'days_in_arrears' => null,
                'total_days_in_arrears' => null,
                'arrears_in_amount' => null,
                'supervisor_id' => 1,
                'supervisor_name' => null,
                'client_id' => 4,
                'relationship' => null,
                'loan_type' => null,
                'future_interest' => null,
                'total_principle' => null,
                'loan_type_2' => 'New',
                'stage_id' => null,
                'stage' => '',
                'loan_type_3' => null,
                'take_home' => 0,
                'approved_loan_value' => 900000,
                'approved_term' => 9,
                'amount_to_be_credited' => null,
                'disbursement_date' => null,
                'bank_account' => null,
                'interest_account_number' => null,
                'charge_account_number' => null,
                'insurance_account_number' => null,
                'selectedLoan' => null,
                'client_type' => null,
                'group_number' => null,
                'group_id' => null,
                'parent_loan_id' => null,
                'created_at' => '2025-07-18 06:23:41',
                'updated_at' => '2025-07-18 10:17:48',
                'disbursement_method' => null,
                'monthly_installment' => 497777.77777778,
                'assessment_data' => '{"approved_loan_value":"900000","approved_term":"9","monthly_installment":497777.77777777775,"take_home":"0","collateral_value":0,"collateral_type":"","available_funds":0,"coverage":0,"monthly_sales":0,"gross_profit":0,"net_profit":0,"recommended":true,"recommended_tenure":9,"product_name":"BUSINESS LOAN","interest_rate":"12","max_amount":0,"max_term":"36","requested_term":9,"days_first_interest":28,"requested_amount":"4000000.00","max_qualifying_amount":0,"existing_settlements":0,"top_up_clearance":0,"total_deductions":0,"net_amount":900000,"total_repayment":4480000,"total_interest":3580000,"overall_score":0,"credit_score":0,"income_score":0,"member_activeness":0,"collateral_score":0,"ltv_score":0,"affordability_score":0,"recommendations":[],"exception_data":{"loan_amount":{"name":"Maximum Loan Amount","description":"Loan amount within product limits","limit":100000000,"given":900000,"unit":"TZS","is_exceeded":false,"status":"ACCEPTED","severity":"none","percentage":0.9,"recommendation":null},"term":{"name":"Maximum Term","description":"Loan term within product limits","limit":36,"given":9,"unit":"months","is_exceeded":false,"status":"ACCEPTED","severity":"none","percentage":25,"recommendation":null},"credit_score":{"name":"Credit Score","description":"Credit score meets product requirements","limit":500,"given":500,"grade":"E","unit":"score","is_exceeded":false,"status":"ACCEPTED","severity":"none","percentage":100,"recommendation":null},"salary_installment":{"name":"Salary\/Installment Limit","description":"Monthly installment exceeds 50% of take-home salary","limit":0,"given":497777.77777777775,"take_home":"0","unit":"TZS","is_exceeded":true,"status":"ABOVE LIMIT","severity":"medium","percentage":0,"recommendation":"Reduce loan amount or increase loan term"},"collateral":{"name":"Loan Multiplier","description":"Loan amount exceeds collateral-based multiplier limit","limit":0,"given":900000,"multiplier":3,"collateral_value":0,"unit":"TZS","is_exceeded":true,"status":"EXCEEDED","severity":"high","percentage":0,"recommendation":"Reduce loan amount or provide additional collateral"},"summary":{"total_checks":5,"passed_checks":3,"failed_checks":2,"high_severity":1,"medium_severity":1,"overall_status":"REJECTED","can_approve":false,"requires_exception":true}},"requires_exception":true,"selectedLoan":null,"top_up_amount":0,"restructured_loan":null,"restructure_amount":0,"settlements":{"total_amount":0,"settlements":[],"count":0,"has_settlements":false},"loan_schedule":[{"installment_date":"2025-08-19","opening_balance":900000,"payment":9172.602739726028,"principal":0,"interest":9172.602739726028,"closing_balance":900000},{"installment_date":"2025-09-19","opening_balance":900000,"payment":105066.326564713,"principal":96066.326564713,"interest":9000,"closing_balance":803933.673435287},{"installment_date":"2025-10-19","opening_balance":803933.673435287,"payment":105066.326564713,"principal":97026.98983036014,"interest":8039.33673435287,"closing_balance":706906.6836049268},{"installment_date":"2025-11-19","opening_balance":706906.6836049268,"payment":105066.326564713,"principal":97997.25972866373,"interest":7069.066836049268,"closing_balance":608909.4238762631},{"installment_date":"2025-12-19","opening_balance":608909.4238762631,"payment":105066.326564713,"principal":98977.23232595038,"interest":6089.094238762631,"closing_balance":509932.1915503127},{"installment_date":"2026-01-19","opening_balance":509932.1915503127,"payment":105066.326564713,"principal":99967.00464920988,"interest":5099.321915503127,"closing_balance":409965.1869011028},{"installment_date":"2026-02-19","opening_balance":409965.1869011028,"payment":105066.326564713,"principal":100966.67469570198,"interest":4099.651869011028,"closing_balance":308998.5122054008},{"installment_date":"2026-03-19","opening_balance":308998.5122054008,"payment":105066.326564713,"principal":101976.34144265899,"interest":3089.985122054008,"closing_balance":207022.17076274182},{"installment_date":"2026-04-19","opening_balance":207022.17076274182,"payment":105066.326564713,"principal":102996.10485708558,"interest":2070.2217076274183,"closing_balance":104026.06590565624},{"installment_date":"2026-05-19","opening_balance":104026.06590565624,"payment":105066.3265647128,"principal":104026.06590565624,"interest":1040.2606590565624,"closing_balance":0}],"credit_score_data":{"score":500,"grade":"E","trend":"Stable","probability_of_default":"High","reasons":["No credit history available"],"date":"2025-07-18T10:17:19.729948Z","risk_level":"E","risk_color":"#FF0000","risk_description":"Very High Risk - No Data"},"client_info_data":{"basic_info":{"full_name":"JAFARI HILA CHARLES","first_name":"JAFARI","middle_name":"HILA","last_name":"CHARLES","date_of_birth":"10\/06\/1982","age":43,"years_to_retirement":17,"months_to_retirement":202,"retirement_date":"10\/06\/2042","gender":"male","marital_status":"single","nationality":"N\/A","client_number":"10002","member_number":"N\/A"},"contact_info":{"phone_number":"0692410353","mobile_phone":"N\/A","email":"andrew.s.mashamba@gmail.com","address":"N\/A","city":"N\/A","region":"N\/A","district":"N\/A","ward":"N\/A"},"employment_info":{"employment_status":"N\/A","employer_name":"N\/A","occupation":"N\/A","business_name":"N\/A","income_source":"100000","education_level":"N\/A","basic_salary":0,"gross_salary":0,"annual_income":0},"financial_info":{"savings_balance":0,"active_loans_count":0,"total_loan_balance":0,"shares":200000,"akiba":123131,"amana":5145212,"monthly_expenses":0,"income_available":10000000},"risk_indicators":[{"type":"employment","level":"high","message":"No employment information"},{"type":"income","level":"medium","message":"Low basic salary"}],"demographics":{"dependent_count":0,"number_of_children":0,"number_of_spouse":0,"religion":"N\/A","place_of_birth":"N\/A","country_of_birth":"N\/A"},"status_indicators":{"client_status":"N\/A","membership_type":"Individual","member_category":"N\/A","registration_date":"N\/A","accept_terms":false,"application_type":"N\/A"}},"product_params_data":{"basic_info":{"sub_product_id":"731205","sub_product_name":"BUSINESS LOAN","product_id":"","prefix":"BL","status":"ACTIVE","currency":"TZS","notes":"BUSINESS LOAN"},"loan_limits":{"min_amount":"1000000","max_amount":"100000000","min_term":"3","max_term":"36","loan_multiplier":"3","ltv":"60","score_limit":"500"},"interest_info":{"interest_rate":"12","interest_tenure":"annually","interest_method":"reducing","amortization_method":"equal_installments","days_in_year":365,"days_in_month":30,"monthly_rate":1},"grace_periods":{"principle_grace_period":0,"interest_grace_period":0,"has_grace_period":false},"fees_and_charges":{"charges":[{"name":"Maintenance Fees","type":"Fixed","value":10,"amount":10,"description":"Monthly maintenance fees"},{"name":"Ledger Fees","type":"Fixed","value":10,"amount":10,"description":"Ledger maintenance fees"}],"total_charges":20,"penalty_value":5000},"insurance_info":{"insurances":[],"total_insurance":0},"repayment_info":{"repayment_strategy":"standard","repayment_frequency":"monthly","inactivity_period":60},"account_info":{"disbursement_account":"N\/A","collection_account_loan_interest":10140004000,"collection_account_loan_principle":101100012001220,"collection_account_loan_charges":10140004100,"collection_account_loan_penalties":101400042004220,"loan_product_account":"0101100012001220","interest_account":"010140004000","fees_account":"010140004100","payable_account":"0101100012001220","insurance_account":"0101400042004220"},"requirements":{"requires_approval":"Yes","allow_statement_generation":"No","send_notifications":"No","require_image_member":"No","require_image_id":"No","require_mobile_number":"No","lock_guarantee_funds":"Yes"},"validation":[{"type":"amount","level":"success","message":"Loan amount within acceptable range","required":"100000000","provided":"4000000.00"},{"type":"status","level":"warning","message":"Product is not active","status":"1"}]},"nbc_loans_data":{"loans":[{"id":1,"loan_id":"1752819821","loan_account_number":null,"loan_sub_product":"731205","principle":"4000000","status":"ONPROGRESS","product_name":"BUSINESS LOAN","product_id":"731205","account_balance":0,"sub_account_balance":0,"installment":0,"loan_status":"No Data","days_overdue":0,"is_selected":false,"risk_level":"Unknown","last_payment_date":null,"next_payment_date":null,"total_paid":0,"remaining_balance":0,"loan_age_days":0,"payment_frequency":"Monthly"}],"summary":{"total_balance":0,"total_installment":0,"total_loans":1,"overdue_loans":0,"active_loans":0,"average_balance":0},"has_loans":true,"total_balance":0,"total_installment":0,"selected_loan":null},"assessed_at":"2025-07-18T10:17:48.147410Z","assessed_by":1,"assessment_type":"with_exceptions","last_updated":"2025-07-18T10:17:48.147456Z","version":"1.0"}',
                'declined_at' => null,
                'declined_by' => null,
                'decline_reason' => null,
                'total_interest' => null,
                'total_principal' => null,
                'total_payment' => null,
                'disbursement_account' => null,
                'net_disbursement_amount' => null,
                'total_deductions' => null,
            ],
            [
                'id' => 2,
                'loan_id' => '1752821326',
                'loan_account_number' => null,
                'loan_sub_product' => 731205,
                'client_number' => 10003,
                'guarantor' => null,
                'branch_id' => 1,
                'principle' => 6000000,
                'interest' => 12,
                'business_name' => null,
                'business_age' => null,
                'business_category' => null,
                'business_type' => null,
                'business_licence_number' => null,
                'business_tin_number' => null,
                'business_inventory' => null,
                'cash_at_hand' => null,
                'daily_sales' => null,
                'cost_of_goods_sold' => null,
                'available_funds' => 0,
                'operating_expenses' => null,
                'monthly_taxes' => null,
                'other_expenses' => null,
                'collateral_value' => 4000000,
                'collateral_location' => null,
                'collateral_description' => null,
                'collateral_type' => 'savings/',
                'tenure' => 12,
                'principle_amount' => null,
                'interest_method' => null,
                'bank_account_number' => null,
                'bank' => null,
                'LoanPhoneNo' => null,
                'status' => 'AWAITING_DISBURSEMENT',
                'loan_status' => 'NORMAL',
                'restructure_loanId' => null,
                'heath' => 'GOOD',
                'phone_number' => null,
                'pay_method' => 'internal_transfer',
                'days_in_arrears' => null,
                'total_days_in_arrears' => null,
                'arrears_in_amount' => null,
                'supervisor_id' => 1,
                'supervisor_name' => null,
                'client_id' => 5,
                'relationship' => null,
                'loan_type' => null,
                'future_interest' => null,
                'total_principle' => null,
                'loan_type_2' => 'New',
                'stage_id' => null,
                'stage' => '',
                'loan_type_3' => null,
                'take_home' => 2000000,
                'approved_loan_value' => 3000000,
                'approved_term' => 12,
                'amount_to_be_credited' => null,
                'disbursement_date' => null,
                'bank_account' => null,
                'interest_account_number' => null,
                'charge_account_number' => null,
                'insurance_account_number' => null,
                'selectedLoan' => null,
                'client_type' => null,
                'group_number' => null,
                'group_id' => null,
                'parent_loan_id' => null,
                'created_at' => '2025-07-18 06:48:46',
                'updated_at' => '2025-07-23 07:33:19',
                'disbursement_method' => null,
                'monthly_installment' => 560000,
                'assessment_data' => '{"approved_loan_value":"3000000.00","approved_term":12,"monthly_installment":560000,"take_home":"2000000","collateral_value":4000000,"collateral_type":"savings\/","available_funds":0,"coverage":66.66666666666666,"monthly_sales":0,"gross_profit":0,"net_profit":0,"recommended":true,"recommended_tenure":12,"product_name":"BUSINESS LOAN","interest_rate":"12","max_amount":0,"max_term":"36","requested_term":12,"days_first_interest":23,"requested_amount":"6000000.00","max_qualifying_amount":0,"existing_settlements":0,"top_up_clearance":0,"total_deductions":0,"net_amount":3000000,"total_repayment":6720000,"total_interest":3720000,"overall_score":0,"credit_score":0,"income_score":0,"member_activeness":0,"collateral_score":0,"ltv_score":0,"affordability_score":0,"recommendations":[],"exception_data":{"loan_amount":{"name":"Maximum Loan Amount","description":"Loan amount within product limits","limit":100000000,"given":3000000,"unit":"TZS","is_exceeded":false,"status":"ACCEPTED","severity":"none","percentage":3,"recommendation":null},"term":{"name":"Maximum Term","description":"Loan term within product limits","limit":36,"given":12,"unit":"months","is_exceeded":false,"status":"ACCEPTED","severity":"none","percentage":33.33,"recommendation":null},"credit_score":{"name":"Credit Score","description":"Credit score meets product requirements","limit":500,"given":500,"grade":"E","unit":"score","is_exceeded":false,"status":"ACCEPTED","severity":"none","percentage":100,"recommendation":null},"salary_installment":{"name":"Salary\/Installment Limit","description":"Monthly installment within acceptable limits","limit":1000000,"given":560000,"take_home":"2000000","unit":"TZS","is_exceeded":false,"status":"ACCEPTED","severity":"none","percentage":56,"recommendation":null},"collateral":{"name":"Loan Multiplier","description":"Loan amount within multiplier limits","limit":12000000,"given":3000000,"multiplier":3,"collateral_value":4000000,"unit":"TZS","is_exceeded":false,"status":"ACCEPTED","severity":"none","percentage":25,"recommendation":null},"summary":{"total_checks":5,"passed_checks":5,"failed_checks":0,"high_severity":0,"medium_severity":0,"overall_status":"APPROVED","can_approve":true,"requires_exception":false}},"requires_exception":true,"selectedLoan":null,"top_up_amount":0,"restructured_loan":null,"restructure_amount":0,"settlements":{"total_amount":0,"settlements":[],"count":0,"has_settlements":false},"loan_schedule":[{"installment_date":"2025-08-24","opening_balance":3000000,"payment":30575.342465753423,"principal":0,"interest":30575.342465753423,"closing_balance":3000000},{"installment_date":"2025-09-24","opening_balance":3000000,"payment":266546.366035025,"principal":236546.36603502498,"interest":30000,"closing_balance":2763453.633964975},{"installment_date":"2025-10-24","opening_balance":2763453.633964975,"payment":266546.366035025,"principal":238911.82969537523,"interest":27634.53633964975,"closing_balance":2524541.8042695997},{"installment_date":"2025-11-24","opening_balance":2524541.8042695997,"payment":266546.366035025,"principal":241300.947992329,"interest":25245.418042695997,"closing_balance":2283240.8562772707},{"installment_date":"2025-12-24","opening_balance":2283240.8562772707,"payment":266546.366035025,"principal":243713.95747225228,"interest":22832.408562772707,"closing_balance":2039526.8988050185},{"installment_date":"2026-01-24","opening_balance":2039526.8988050185,"payment":266546.366035025,"principal":246151.0970469748,"interest":20395.268988050186,"closing_balance":1793375.8017580437},{"installment_date":"2026-02-24","opening_balance":1793375.8017580437,"payment":266546.366035025,"principal":248612.60801744455,"interest":17933.758017580436,"closing_balance":1544763.193740599},{"installment_date":"2026-03-24","opening_balance":1544763.193740599,"payment":266546.366035025,"principal":251098.734097619,"interest":15447.631937405991,"closing_balance":1293664.45964298},{"installment_date":"2026-04-24","opening_balance":1293664.45964298,"payment":266546.366035025,"principal":253609.72143859518,"interest":12936.6445964298,"closing_balance":1040054.7382043848},{"installment_date":"2026-05-24","opening_balance":1040054.7382043848,"payment":266546.366035025,"principal":256145.81865298114,"interest":10400.547382043847,"closing_balance":783908.9195514037},{"installment_date":"2026-06-24","opening_balance":783908.9195514037,"payment":266546.366035025,"principal":258707.27683951095,"interest":7839.089195514038,"closing_balance":525201.6427118927},{"installment_date":"2026-07-24","opening_balance":525201.6427118927,"payment":266546.366035025,"principal":261294.34960790607,"interest":5252.016427118927,"closing_balance":263907.29310398665},{"installment_date":"2026-08-24","opening_balance":263907.29310398665,"payment":266546.3660350265,"principal":263907.29310398665,"interest":2639.0729310398665,"closing_balance":0}],"credit_score_data":{"score":500,"grade":"E","trend":"Stable","probability_of_default":"High","reasons":["No credit history available"],"date":"2025-07-23T07:33:19.719576Z","risk_level":"E","risk_color":"#FF0000","risk_description":"Very High Risk - No Data"},"client_info_data":{"basic_info":{"full_name":"JOHN  SAFARI PENGO","first_name":"JOHN ","middle_name":"SAFARI","last_name":"PENGO","date_of_birth":"19\/07\/1980","age":45,"years_to_retirement":15,"months_to_retirement":179,"retirement_date":"19\/07\/2040","gender":"male","marital_status":"married","nationality":"N\/A","client_number":"10003","member_number":"N\/A"},"contact_info":{"phone_number":"0692410353","mobile_phone":"N\/A","email":"andrew.s.mashamba@gmail.com","address":"N\/A","city":"N\/A","region":"N\/A","district":"N\/A","ward":"N\/A"},"employment_info":{"employment_status":"N\/A","employer_name":"N\/A","occupation":"N\/A","business_name":"N\/A","income_source":"524242","education_level":"N\/A","basic_salary":0,"gross_salary":0,"annual_income":0},"financial_info":{"savings_balance":0,"active_loans_count":0,"total_loan_balance":0,"shares":424242,"akiba":424242,"amana":424242,"monthly_expenses":0,"income_available":10100},"risk_indicators":[{"type":"employment","level":"high","message":"No employment information"},{"type":"income","level":"medium","message":"Low basic salary"}],"demographics":{"dependent_count":0,"number_of_children":0,"number_of_spouse":0,"religion":"N\/A","place_of_birth":"N\/A","country_of_birth":"N\/A"},"status_indicators":{"client_status":"N\/A","membership_type":"Individual","member_category":"N\/A","registration_date":"N\/A","accept_terms":false,"application_type":"N\/A"}},"product_params_data":{"basic_info":{"sub_product_id":"731205","sub_product_name":"BUSINESS LOAN","product_id":"","prefix":"BL","status":"ACTIVE","currency":"TZS","notes":"BUSINESS LOAN"},"loan_limits":{"min_amount":"1000000","max_amount":"100000000","min_term":"3","max_term":"36","loan_multiplier":"3","ltv":"60","score_limit":"500"},"interest_info":{"interest_rate":"12","interest_tenure":"annually","interest_method":"reducing","amortization_method":"equal_installments","days_in_year":365,"days_in_month":30,"monthly_rate":1},"grace_periods":{"principle_grace_period":0,"interest_grace_period":0,"has_grace_period":false},"fees_and_charges":{"charges":[{"name":"Maintenance Fees","type":"Fixed","value":10,"amount":10,"description":"Monthly maintenance fees"},{"name":"Ledger Fees","type":"Fixed","value":10,"amount":10,"description":"Ledger maintenance fees"}],"total_charges":20,"penalty_value":5000},"insurance_info":{"insurances":[],"total_insurance":0},"repayment_info":{"repayment_strategy":"standard","repayment_frequency":"monthly","inactivity_period":60},"account_info":{"disbursement_account":"N\/A","collection_account_loan_interest":10140004000,"collection_account_loan_principle":101100012001220,"collection_account_loan_charges":10140004100,"collection_account_loan_penalties":101400042004220,"loan_product_account":"0101100012001220","interest_account":"010140004000","fees_account":"010140004100","payable_account":"0101100012001220","insurance_account":"0101400042004220"},"requirements":{"requires_approval":"Yes","allow_statement_generation":"No","send_notifications":"No","require_image_member":"No","require_image_id":"No","require_mobile_number":"No","lock_guarantee_funds":"Yes"},"validation":[{"type":"amount","level":"success","message":"Loan amount within acceptable range","required":"100000000","provided":"6000000.00"},{"type":"status","level":"warning","message":"Product is not active","status":"1"}]},"nbc_loans_data":{"loans":[{"id":2,"loan_id":"1752821326","loan_account_number":null,"loan_sub_product":"731205","principle":"6000000","status":"AWAITING_DISBURSEMENT","product_name":"BUSINESS LOAN","product_id":"731205","account_balance":0,"sub_account_balance":0,"installment":0,"loan_status":"No Data","days_overdue":0,"is_selected":false,"risk_level":"Unknown","last_payment_date":null,"next_payment_date":null,"total_paid":0,"remaining_balance":0,"loan_age_days":5,"payment_frequency":"Monthly"}],"summary":{"total_balance":0,"total_installment":0,"total_loans":1,"overdue_loans":0,"active_loans":0,"average_balance":0},"has_loans":true,"total_balance":0,"total_installment":0,"selected_loan":null},"assessed_at":"2025-07-23T07:33:19.895523Z","assessed_by":1,"assessment_type":"with_exceptions","last_updated":"2025-07-23T07:33:19.895581Z","version":"1.0"}',
                'declined_at' => null,
                'declined_by' => null,
                'decline_reason' => null,
                'total_interest' => null,
                'total_principal' => null,
                'total_payment' => null,
                'disbursement_account' => null,
                'net_disbursement_amount' => null,
                'total_deductions' => null,
            ],
        ];

        foreach ($data as $row) {
            DB::table('loans')->insert($row);
    }
}
}